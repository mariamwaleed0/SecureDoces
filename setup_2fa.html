{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h3 class="text-center">إعداد المصادقة الثنائية</h3>
                </div>
                <div class="card-body">
                    <p class="text-center">امسح رمز QR باستخدام تطبيق المصادقة (مثل Google Authenticator):</p>
                    
                    <div class="text-center mb-4">
                        <img src="data:image/png;base64,{{ qr_code }}" alt="رمز QR" style="width: 200px; height: 200px;">
                    </div>

                    <p class="text-center">أو أدخل هذا الرمز يدوياً في تطبيق المصادقة:</p>
                    <div class="alert alert-info text-center">
                        <strong style="font-size: 1.2em; letter-spacing: 2px;">{{ secret_key }}</strong>
                    </div>

                    <form method="POST" class="mt-4">
                        <div class="form-group">
                            <label for="token" class="mb-2">أدخل الرمز المكون من 6 أرقام من تطبيق المصادقة:</label>
                            <input type="text" class="form-control text-center" id="token" name="token" 
                                   pattern="[0-9]{6}" maxlength="6" required
                                   style="font-size: 1.5em; letter-spacing: 4px;">
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg btn-block w-100 mt-4">تحقق وتفعيل المصادقة الثنائية</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.card {
    border: none;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
}
.card-header {
    background-color: #f8f9fa;
    border-bottom: none;
}
.form-control:focus {
    border-color: #4a90e2;
    box-shadow: 0 0 0 0.2rem rgba(74,144,226,0.25);
}
</style>
{% endblock %} 
